<?xml version="1.0" encoding="utf-8" ?>
<mapper>
	<select id="SelectBoardList">
		SELECT
			BOARDNO,
			BOARDTITLE,
			BOARDAUTHOR,
			BOARDVIEW
		FROM
			T_BOARD
		ORDER BY BOARDNO DESC
	</select>
	
	<insert id="InsertBoard">
		INSERT INTO T_BOARD(BOARDTITLE, BOARDAUTHOR, BOARDCONTENTS, CREATE_DATETIME, BOARDUSERID)
		VALUES (@BOARDTITLE, @BOARDAUTHOR, @BOARDCONTENTS, GETDATE(), @BOARDUSERID)
	</insert>

	<select id="SelectMaxBoardNo">
		SELECT MAX(BOARDNO) BOARDNO
		FROM T_BOARD;
	</select>
	
	<select id="SelectBoardDetail">
		SELECT 
			BOARDNO,
			BOARDTITLE,
			BOARDAUTHOR,
			BOARDVIEW,
			BOARDCONTENTS,
			CREATE_DATETIME,
			BOARDUSERID
		FROM 
			T_BOARD
		WHERE 
			BOARDNO = @BOARDNO
	</select>
	
	<update id="UpdateBoard">
		UPDATE T_BOARD
		SET 
			BOARDTITLE=@BOARDTITLE,
			BOARDCONTENTS=@BOARDCONTENTS
		WHERE BOARDNO=@BOARDNO
	</update>
	
	<delete id="DeleteBoard">
		DELETE FROM T_BOARD
		WHERE BOARDNO = @BOARDNO		
	</delete>

	<update id="UpdateBoardView">
		UPDATE T_BOARD
		SET 
			BOARDVIEW=BOARDVIEW+1
		WHERE BOARDNO=@BOARDNO;
	</update>
	
	<select id="SelectBoardReply">
		SELECT
			REPLYID,
			BOARDNO,
			REPLYNO,
			REPLYCONTENTS,
			REPLYCREATETIME,
			REPLYREPLYNO,
			REPLYREPLYCONTENTS,
			REPLYREPLYCREATETIME
		FROM T_BOARD_REPLY
		WHERE BOARDNO=@BOARDNO
		ORDER BY REPLYNO, REPLYREPLYNO;
	</select>
</mapper>